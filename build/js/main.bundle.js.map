{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://kekstagram/./source/js/api.js","webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/big-picture.js","webpack://kekstagram/./source/js/miniatures-render.js","webpack://kekstagram/./source/js/miniatures-sort.js","webpack://kekstagram/./source/js/effects.js","webpack://kekstagram/./source/js/photo-scale-control.js","webpack://kekstagram/./source/js/photo-redactor-popup.js","webpack://kekstagram/./source/js/photo-redactor.js","webpack://kekstagram/./source/js/form.js","webpack://kekstagram/./source/js/main.js"],"sourcesContent":["const sortPanel = document.querySelector('.img-filters');\n\nconst getData = (onSuccess, onError, sort) => {\n  fetch('https://23.javascript.pages.academy/kekstagram/data')\n    .then((response) => {\n      if (response.ok) {\n        sortPanel.classList.remove('img-filters--inactive');\n        return response.json();\n      } else {\n        onError();\n      }\n    })\n    .then((data) => {\n      onSuccess(data);\n      sort(data);\n    })\n    .catch(() => onError())\n};\n\nconst sendData = (onSuccess, onError, body) => {\n  fetch ('https://23.javascript.pages.academy/kekstagram', {\n    method: 'POST',\n    body,\n  })\n    .then((response) => {\n      if (!response.ok) {\n        onError();\n      }\n\n      onSuccess();\n    })\n    .catch(() => onError())\n};\n\nexport { getData, sendData }\n","// Получаем случайное число\nconst getRandomInteger = (min, max) => {\n  if (min < 0 || max < 0) {\n    return -1;\n  }\n\n  if (max < min) {\n    [min, max] = [max, min];\n  }\n\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n// Получение массива случайных уникальных чисел\nconst createRandomUniqueIntegersArray = (min, max, arrayLength) => {\n  let numbers = [];\n\n  if (max - min + 1 < arrayLength) {\n    return -1;\n  }\n\n  while (numbers.length < arrayLength) {\n    const num = getRandomInteger(min, max);\n    if (!numbers.includes(num)) {\n      numbers.push(num);\n    }\n  }\n  return numbers;\n}\n\n// Проверка длинны строки\nconst checkStrokeLength = (stroke, maxLength) => {\n  return stroke.length <= maxLength;\n};\ncheckStrokeLength('', 1);\n\n// Проверка на нажитие клавиши Escape\nconst isEscapeKey = (evt) => {\n  return evt.key === 'Escape' || evt.key === 'Esc';\n};\n\nconst showGetErrorMessage = () => {\n  const body = document.querySelector('body');\n  const alert = document.createElement('div');\n  alert.textContent = 'Ошибка загрузки данных. Пожалуйста, перезагрузите страницу.';\n  alert.style.position = 'absolute';\n  alert.style.top = '0';\n  alert.style.left = '0';\n  alert.style.right = '0';\n  alert.style.padding = '16px 0 16px 0';\n  alert.style.backgroundColor = 'white';\n  alert.style.fontSize = '28px';\n  alert.style.fontWeight = '700';\n  alert.style.textAlign = 'center';\n  alert.style.color = '#232321';\n\n  body.appendChild(alert);\n};\n\nconst showSuccessSendDataMessage = () => {\n  const pageBody = document.querySelector('body');\n  const succesMessage = document.querySelector('#success').content.querySelector('.success');\n  const closeButton = succesMessage.querySelector('.success__button');\n\n  closeButton.addEventListener('click', () => {\n    succesMessage.remove();\n  })\n\n  document.addEventListener('keydown', (evt) => {\n    if (isEscapeKey(evt)) {\n      succesMessage.remove();\n    }\n  })\n\n  pageBody.appendChild(succesMessage);\n};\n\nconst showErrorSendDataMessage = () => {\n  const pageBody = document.querySelector('body');\n  const errorMessage = document.querySelector('#error').content.querySelector('.error');\n  const closeButton = errorMessage.querySelector('.error__button');\n\n\n  closeButton.addEventListener('click', () => {\n    errorMessage.remove();\n  })\n\n  document.addEventListener('keydown', (evt) => {\n    if (isEscapeKey(evt)) {\n      errorMessage.remove();\n    }\n  })\n\n  pageBody.appendChild(errorMessage);\n};\n\nexport { getRandomInteger, createRandomUniqueIntegersArray, checkStrokeLength, isEscapeKey, showGetErrorMessage, showSuccessSendDataMessage, showErrorSendDataMessage }\n\n","import { isEscapeKey } from './util.js';\n\nconst pageBody = document.querySelector('body');\nconst bigPicture = pageBody.querySelector('.big-picture');\nconst image = bigPicture.querySelector('.big-picture__img img');\nconst photoDescription = bigPicture.querySelector('.social__caption');\nconst likes = bigPicture.querySelector('.likes-count');\nconst commentsCount = bigPicture.querySelector('.comments-count');\nconst socialCommentsCounter = bigPicture.querySelector('.social__comment-counter');\nconst commentsLoader = bigPicture.querySelector('.comments-loader');\nconst bigPictureCloseButton = bigPicture.querySelector('.big-picture__cancel');\nconst commentsList = bigPicture.querySelector('.social__comments');\nconst commentTemplate = document.querySelector('#comment').content;\n\nconst COMMENTS_DEFAULT_COUNT = 5;\nlet currentCommentsCount = COMMENTS_DEFAULT_COUNT;\n\nconst onBigPictureEscKeydown = (popup, pageBody) => {\n  return (evt) => {\n    if (isEscapeKey(evt)) {\n      evt.preventDefault();\n      closeBigPicture(popup, pageBody);\n    }\n  }\n};\n\nconst closeBigPicture = (popup, pageBody) => {\n  popup.classList.add('hidden');\n  pageBody.classList.remove('modal-open');\n\n  currentCommentsCount = COMMENTS_DEFAULT_COUNT;\n  commentsLoader.hidden = false;\n\n  commentsLoader.removeEventListener('click', commentsLoaderHandler);\n  document.removeEventListener('keydown', onBigPictureEscKeydown);\n};\n\nlet commentsLoaderHandler;\n\nconst openBigPicture = (popup, closeButton, pageBody, data) => {\n  pageBody.classList.add('modal-open');\n\n  closeButton.addEventListener('click', () => {\n    closeBigPicture(popup, pageBody);\n\n    closeButton.removeEventListener('click', closeBigPicture);\n  });\n\n  commentsLoaderHandler = onCommentsLoaderClick(data.comments);\n  document.addEventListener('keydown', onBigPictureEscKeydown(popup, pageBody));\n  commentsLoader.addEventListener('click', commentsLoaderHandler);\n  popup.classList.remove('hidden');\n};\n\n\nconst renderComments = (comments, count) => {\n  const commentsDocumentFragment = document.createDocumentFragment();\n\n  commentsList.innerHTML = '';\n\n  for (let i = 0; i <= count - 1; i++) {\n    const comment = commentTemplate.cloneNode(true);\n    const commentAvatar = comment.querySelector('.social__picture');\n    const commentText = comment.querySelector('.social__text');\n\n    commentAvatar.src = comments[i].avatar;\n    commentAvatar.alt = comments[i].name;\n\n    commentText.textContent = comments[i].message;\n\n    commentsDocumentFragment.appendChild(comment);\n  }\n\n  commentsList.appendChild(commentsDocumentFragment);\n};\n\nconst onCommentsLoaderClick = (comments) => {\n  return () => {\n\n    currentCommentsCount += COMMENTS_DEFAULT_COUNT;\n\n    const commentsToRender = comments.slice(0, currentCommentsCount);\n\n    if (currentCommentsCount <= comments.length) {\n      renderComments(commentsToRender, currentCommentsCount);\n      socialCommentsCounter.textContent = currentCommentsCount;\n    } else {\n      commentsLoader.hidden = true;\n      renderComments(comments, comments.length);\n      socialCommentsCounter.textContent = comments.length;\n    }\n  }\n\n};\n\nconst showBigPicture = (data) => {\n\n  image.src = data.url;\n  photoDescription.textContent = data.description;\n  likes.textContent = data.likes;\n  commentsCount.textContent = data.comments.length;\n\n  if (data.comments.length <= COMMENTS_DEFAULT_COUNT) {\n    renderComments(data.comments, data.comments.length);\n    socialCommentsCounter.textContent = data.comments.length;\n    commentsLoader.hidden = true;\n  } else {\n    renderComments(data.comments, currentCommentsCount);\n    socialCommentsCounter.textContent = currentCommentsCount;\n  }\n\n  openBigPicture(bigPicture, bigPictureCloseButton, pageBody, data);\n}\n\nexport { showBigPicture }\n","import { showBigPicture } from './big-picture.js';\n\nconst miniatureTemplate = document.querySelector('#picture').content;\nconst miniaturesList = document.querySelector('.pictures');\n\nconst makeMiniature = (data) => {\n  const miniature = miniatureTemplate.cloneNode(true);\n  const miniatureImage = miniature.querySelector('.picture__img');\n  const miniatureComments = miniature.querySelector('.picture__comments');\n  const miniatureLikes = miniature.querySelector('.picture__likes');\n\n  miniatureImage.src = data.url;\n  miniatureComments.textContent = data.comments.length;\n  miniatureLikes.textContent = data.likes;\n\n  return miniature;\n};\n\nconst renderMiniatures = (miniaturesData) => {\n  const miniaturesFragment = document.createDocumentFragment();\n\n  for (let i = 0; i <= miniaturesData.length - 1; i++) {\n    miniaturesFragment.appendChild(makeMiniature(miniaturesData[i]));\n  }\n\n  miniaturesList.appendChild(miniaturesFragment);\n\n  for (let i = 0; i <= miniaturesData.length - 1; i++) {\n    miniaturesList.querySelectorAll('a')[i].addEventListener('click', (evt) => {\n      evt.preventDefault();\n      showBigPicture(miniaturesData[i]);\n    });\n  }\n};\n\nexport { renderMiniatures }\n","import { renderMiniatures } from './miniatures-render.js';\nimport { createRandomUniqueIntegersArray } from './util.js';\n\nconst RANDOM_MINIATURES_COUNT = 10;\n\nconst sortForm = document.querySelector('.img-filters__form');\n\nconst removeMiniatures = () => {\n  const miniatures = document.querySelector('.pictures').querySelectorAll('a');\n  miniatures.forEach(miniature => miniature.remove());\n};\n\nconst removeAndAddActiveClass = (button) => {\n  const buttons = sortForm.querySelectorAll('button');\n  buttons.forEach((button) => {\n    button.classList.remove('img-filters__button--active');\n  })\n\n  button.classList.add('img-filters__button--active');\n};\n\nconst onDefaultClick = (button, data) => {\n  removeMiniatures();\n  removeAndAddActiveClass(button);\n  renderMiniatures(data);\n};\n\nconst onRandomClick = (button, data) => {\n  removeAndAddActiveClass(button);\n\n  const indexArray = createRandomUniqueIntegersArray(0, data.length - 1, RANDOM_MINIATURES_COUNT);\n  const randomMiniatures = indexArray\n    .map(index => data.slice()[index]);\n\n  removeMiniatures();\n  renderMiniatures(randomMiniatures);\n};\n\nconst onDiscussedClick = (button, data) => {\n  removeAndAddActiveClass(button);\n\n  const discussedSortArray = data\n    .slice()\n    .sort((a, b) => b.comments.length - a.comments.length);\n\n  removeMiniatures();\n  renderMiniatures(discussedSortArray);\n};\n\nconst onSortFormElementClick = (data) => {\n  return (evt) => {\n    if (evt.target.id === 'filter-default') {\n      onDefaultClick(evt.target, data);\n    }\n\n    if (evt.target.id === 'filter-random') {\n      onRandomClick(evt.target, data);\n    }\n\n    if (evt.target.id === 'filter-discussed') {\n      onDiscussedClick(evt.target, data);\n    }\n  }\n};\n\nconst onSortFormChange = (data) => {\n  sortForm.addEventListener('click', onSortFormElementClick(data));\n};\n\nexport { onSortFormChange }\n","const image = document.querySelector('.img-upload__preview img');\nconst form = document.querySelector('.img-upload__form');\nconst sliderElement = document.querySelector('.effect-level__slider');\nconst effectLevel = document.querySelector('.effect-level__value');\nconst effectNoneButton = form.querySelector('#effect-none');\nconst sliderWrapper = form.querySelector('.img-upload__effect-level');\n\nconst EFFECTS = [\n  {\n    name: 'none',\n    min: 0,\n    max: 100,\n    step: 1,\n  },\n  {\n    name: 'chrome',\n    style: 'grayscale',\n    min: 0,\n    max: 1,\n    step: 0.1,\n    unit: '',\n  },\n  {\n    name: 'sepia',\n    style: 'sepia',\n    min: 0,\n    max: 1,\n    step: 0.1,\n    unit: '',\n  },\n  {\n    name: 'marvin',\n    style: 'invert',\n    min: 0,\n    max: 100,\n    step: 1,\n    unit: '%',\n  },\n  {\n    name: 'phobos',\n    style: 'blur',\n    min: 0,\n    max: 3,\n    step: 0.1,\n    unit: 'px',\n  },\n  {\n    name: 'heat',\n    style: 'brightness',\n    min: 1,\n    max: 3,\n    step: 0.1,\n    unit: '',\n  },\n];\nconst DEFAULT_EFFECT = EFFECTS[0];\nlet chosenEffect = DEFAULT_EFFECT;\n\nconst isDefault = () => chosenEffect === DEFAULT_EFFECT;\n\nconst updateSlider = () => {\n  sliderWrapper.classList.remove('hidden');\n  sliderElement.noUiSlider.updateOptions({\n    range: {\n      min: chosenEffect.min,\n      max: chosenEffect.max,\n    },\n    step: chosenEffect.step,\n    start: chosenEffect.max,\n  });\n\n  if(isDefault()) {\n    sliderWrapper.classList.add('hidden');\n  }\n};\n\nconst onFormChange = (evt) => {\n  if(!evt.target.classList.contains('effects__radio')) {\n    return;\n  }\n  chosenEffect = EFFECTS.find((effect) => effect.name === evt.target.value);\n  updateSlider();\n};\n\nconst onSliderUpdate = () => {\n  image.style.filter = 'none';\n  image.className = '';\n  if(isDefault()) {\n    return;\n  }\n  const sliderValue = sliderElement.noUiSlider.get();\n  image.style.filter = `${chosenEffect.style}(${sliderValue}${chosenEffect.unit})`;\n  image.classList.add(`effects-preview--${chosenEffect.name}`);\n  effectLevel.value = sliderValue;\n};\n\nconst resetEffects = () => {\n  chosenEffect = DEFAULT_EFFECT;\n  effectNoneButton.checked = true;\n  updateSlider();\n};\n\nwindow.noUiSlider.create(sliderElement, {\n  range: {\n    min: DEFAULT_EFFECT.min,\n    max: DEFAULT_EFFECT.max,\n  },\n  start: DEFAULT_EFFECT.max,\n  step: DEFAULT_EFFECT.step,\n  connect: 'lower',\n});\nupdateSlider();\n\nform.addEventListener('change', onFormChange);\nsliderElement.noUiSlider.on('update', onSliderUpdate);\n\nexport { resetEffects };\n","const smallerButton = document.querySelector('.scale__control--smaller');\nconst biggerButton = document.querySelector('.scale__control--bigger');\nconst controlValue = document.querySelector('.scale__control--value');\nconst image = document.querySelector('.img-upload__preview img');\n\nconst ControlConfig = {\n  MIN: 25,\n  MAX: 100,\n  STEP: 25,\n  DEFAULT: 100,\n};\n\nconst resetScale = () => {\n  controlValue.value = 100 + '%';\n  image.style.transform = 'scale(1)';\n};\n\nconst minusValue = (value) => {\n  if (value > ControlConfig.MIN && value <= ControlConfig.MAX) {\n    value = value - ControlConfig.STEP;\n  }\n\n  return value;\n};\n\nconst plusValue = (value) => {\n  if (value >= ControlConfig.MIN && value < ControlConfig.MAX) {\n    value = value + ControlConfig.STEP;\n  }\n\n  return value;\n};\n\nconst changeScale = () => {\n  let currentValue = ControlConfig.DEFAULT;\n  controlValue.value = currentValue + '%'\n\n  smallerButton.addEventListener('click', () => {\n    currentValue = minusValue(currentValue);\n    controlValue.value = currentValue + '%'\n\n    image.style.transform = `scale(0.${currentValue})`;\n  });\n\n\n  biggerButton.addEventListener('click', () => {\n    currentValue = plusValue(currentValue);\n    controlValue.value = currentValue + '%'\n    if (currentValue !== ControlConfig.MAX) {\n      image.style.transform = `scale(0.${currentValue})`;\n    } else {\n      image.style.transform = 'scale(1)';\n    }\n  });\n};\n\nconst scaleSetting = () => {\n  changeScale();\n};\n\nexport { scaleSetting, resetScale }\n","import { isEscapeKey } from './util.js'\nimport { resetEffects } from './effects.js'\nimport { resetScale } from './photo-scale-control.js'\n\nconst form = document.querySelector('.img-upload__form')\nconst uploadFileControl = document.querySelector('#upload-file');\nconst uploadFilePopup = document.querySelector('.img-upload__overlay');\nconst uploadFilePopupCloseButton = document.querySelector('#upload-cancel');\nconst pageBody = document.querySelector('body');\nconst hashtagField = document.querySelector('.text__hashtags');\nconst descriptionField = document.querySelector('.text__description');\n\nconst isHastagFieldFocus = () => document.activeElement === hashtagField;\nconst isDescriptionFieldFocus = () => document.activeElement === descriptionField;\nconst isTextFieldFocus = () => isHastagFieldFocus() || isDescriptionFieldFocus();\n\nconst closeRedactorPopup = () => {\n  uploadFilePopup.classList.add('hidden');\n  pageBody.classList.remove('modal-open');\n\n  uploadFileControl.value = '';\n\n  resetScale();\n  resetEffects();\n  form.reset();\n};\n\nconst onRedactorPopupEscKeydown = (evt) => {\n  if (isEscapeKey(evt) && !isTextFieldFocus()) {\n    evt.preventDefault();\n    closeRedactorPopup();\n  }\n};\n\nconst openRedactorPopup = () => {\n  uploadFilePopupCloseButton.addEventListener('click', closeRedactorPopup);\n\n  document.addEventListener('keydown', onRedactorPopupEscKeydown);\n\n  pageBody.classList.add('modal-open');\n  uploadFilePopup.classList.remove('hidden');\n};\n\nexport { openRedactorPopup, closeRedactorPopup }\n","import { openRedactorPopup } from './photo-redactor-popup.js';\nimport { scaleSetting } from './photo-scale-control.js'\n\nconst uploadFileControl = document.querySelector('#upload-file');\nconst imageElement = document.querySelector('.img-upload__preview img');\n\n\n\nconst photoRedactorConfig = () => {\n  uploadFileControl.addEventListener('change', (evt) => {\n    const target = evt.target;\n    const fileReader = new FileReader();\n\n    fileReader.addEventListener('load', function() {\n      imageElement.src = fileReader.result;\n    });\n\n    fileReader.readAsDataURL(target.files[0]);\n\n    scaleSetting();\n    openRedactorPopup();\n  });\n\n};\n\nphotoRedactorConfig();\n","import { sendData } from './api.js';\nimport { closeRedactorPopup } from './photo-redactor-popup.js';\nimport { showSuccessSendDataMessage, showErrorSendDataMessage } from './util.js';\n\nconst form = document.querySelector('.img-upload__form');\nconst hashtagField = document.querySelector('.text__hashtags');\n\nconst MAX_HASHTAG_COUNT = 5;\nconst MIN_HASHTAG_LENGTH = 2;\nconst MAX_HASHTAG_LENGTH = 20;\nconst UNVALID_SYMBOLS = /[^a-zA-Z0-9а-яА-ЯёЁ]/g;\n\nconst pristine = new Pristine(form, {\n  classTo: 'img-upload__element',\n  errorTextParent: 'img-upload__element',\n  errorTextClass: 'img-upload__error',\n});\n\nconst startsWithHash = (string) => string[0] === '#';\n\nconst hasValidLength = (string) =>\n  string.length >= MIN_HASHTAG_LENGTH && string.length <= MAX_HASHTAG_LENGTH;\n\nconst hasValidSymbols = (string) => !UNVALID_SYMBOLS.test(string.slice(1));\n\nconst isValidTag = (tag) =>\n  startsWithHash(tag) && hasValidLength(tag) && hasValidSymbols(tag);\n\nconst hasValidCount = (tags) => tags.length <= MAX_HASHTAG_COUNT;\n\nconst hasUniqueTags = (tags) => {\n  const lowerCaseTags = tags.map((tag) => tag.toLowerCase());\n  return lowerCaseTags.length === new Set(lowerCaseTags).size;\n};\n\nconst validateTags = (value) => {\n  const tags = value\n    .trim()\n    .split(' ')\n    .filter((tag) => tag.trim().length);\n  return hasValidCount(tags) && hasUniqueTags(tags) && tags.every(isValidTag);\n};\n\npristine.addValidator(\n  hashtagField,\n  validateTags,\n  'Неправильно заполнены хэштеги',\n);\n\nconst onFormSuccessSubmit = () => {\n  closeRedactorPopup();\n  showSuccessSendDataMessage();\n};\n\nconst onFormSubmit = (evt) => {\n  evt.preventDefault();\n  const body = new FormData(evt.target);\n\n  if (pristine.validate()) {\n    sendData(onFormSuccessSubmit, showErrorSendDataMessage, body);\n  }\n};\n\nform.addEventListener('submit', onFormSubmit);\n","import { getData } from './api.js';\nimport { renderMiniatures } from './miniatures-render.js';\nimport { showGetErrorMessage } from './util.js';\nimport { onSortFormChange } from './miniatures-sort.js';\nimport './effects.js'\nimport './photo-redactor.js';\nimport './form.js';\nimport './miniatures-sort.js';\n\ngetData(renderMiniatures, showGetErrorMessage, onSortFormChange);\n\n"],"names":["sortPanel","document","querySelector","getRandomInteger","min","max","Math","floor","random","isEscapeKey","evt","key","showErrorSendDataMessage","pageBody","errorMessage","content","addEventListener","remove","appendChild","bigPicture","photoDescription","likes","commentsCount","socialCommentsCounter","commentsLoader","bigPictureCloseButton","commentsList","commentTemplate","currentCommentsCount","onBigPictureEscKeydown","popup","preventDefault","closeBigPicture","classList","add","hidden","removeEventListener","commentsLoaderHandler","renderComments","comments","count","commentsDocumentFragment","createDocumentFragment","innerHTML","i","comment","cloneNode","commentAvatar","commentText","src","avatar","alt","name","textContent","message","showBigPicture","data","url","description","length","closeButton","commentsToRender","slice","openBigPicture","miniatureTemplate","miniaturesList","makeMiniature","miniature","miniatureImage","miniatureComments","miniatureLikes","renderMiniatures","miniaturesData","miniaturesFragment","querySelectorAll","sortForm","removeMiniatures","forEach","removeAndAddActiveClass","button","onSortFormElementClick","target","id","onDefaultClick","randomMiniatures","arrayLength","numbers","num","includes","push","createRandomUniqueIntegersArray","map","index","onRandomClick","discussedSortArray","sort","a","b","onDiscussedClick","sliderElement","effectLevel","effectNoneButton","sliderWrapper","EFFECTS","step","style","unit","DEFAULT_EFFECT","chosenEffect","isDefault","updateSlider","noUiSlider","updateOptions","range","start","window","create","connect","contains","find","effect","value","on","filter","className","sliderValue","get","smallerButton","biggerButton","controlValue","uploadFileControl","uploadFilePopup","uploadFilePopupCloseButton","hashtagField","descriptionField","closeRedactorPopup","transform","checked","reset","onRedactorPopupEscKeydown","activeElement","imageElement","fileReader","FileReader","result","readAsDataURL","files","currentValue","changeScale","UNVALID_SYMBOLS","pristine","Pristine","classTo","errorTextParent","errorTextClass","isValidTag","tag","startsWithHash","string","test","hasValidSymbols","addValidator","tags","trim","split","hasValidCount","lowerCaseTags","toLowerCase","Set","size","hasUniqueTags","every","onFormSuccessSubmit","succesMessage","showSuccessSendDataMessage","onSuccess","onError","body","FormData","validate","fetch","method","then","response","ok","catch","sendData","alert","createElement","position","top","left","right","padding","backgroundColor","fontSize","fontWeight","textAlign","color","json"],"sourceRoot":""}